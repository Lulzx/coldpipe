{% extends "base.html" %}
{% from "_macros/components.html" import status_badge, page_header, empty_state %}
{% block title %}Campaigns - Coldpipe{% endblock %}
{% block content %}
{{ page_header("Campaigns") }}

<div class="card mb-3">
  <div class="card-body">
    <ul class="nav nav-tabs card-header-tabs">
      <li class="nav-item">
        <a class="nav-link{% if not status %} active{% endif %}" href="/campaigns">All</a>
      </li>
      {% for s in ['draft', 'active', 'paused', 'completed', 'archived'] %}
      <li class="nav-item">
        <a class="nav-link{% if status == s %} active{% endif %}" href="/campaigns?status={{ s }}">{{ s|capitalize }}</a>
      </li>
      {% endfor %}
    </ul>
  </div>
</div>

<div class="card">
  <div class="table-responsive">
    <table class="table table-vcenter card-table">
      <thead>
        <tr>
          <th>Name</th>
          <th>Status</th>
          <th>Mailbox ID</th>
          <th>Daily Limit</th>
          <th>Created</th>
        </tr>
      </thead>
      <tbody>
        {% block table_body %}
        {% for c in campaigns %}
        <tr>
          <td><a href="/campaigns/{{ c.id }}">{{ c.name }}</a></td>
          <td>{{ status_badge(c.status) }}</td>
          <td>{{ c.mailbox_id or '-' }}</td>
          <td>{{ c.daily_limit }}</td>
          <td>{{ c.created_at[:10] if c.created_at else '-' }}</td>
        </tr>
        {% else %}
        {{ empty_state("No campaigns found", "Create a campaign via CLI to get started.", 5, '<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-lg" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path d="M3 12h4l3 8l4 -16l3 8h4"/></svg>') }}
        {% endfor %}
        {% endblock %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
